<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOVAI - Quiz</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-section">
                <div class="logo">
                    <img src="logo.png" alt="NOVAI Logo" class="logo-image">
                </div>
            </div>

            <nav class="nav-menu">
                <a href="/journey.html" class="nav-item-link">
                    <div class="nav-item">
                        <div class="nav-icon">üè†</div>
                        <div class="nav-label">Accueil</div>
                    </div>
                </a>
                <div class="nav-dropdown">
                    <div class="nav-item-link nav-dropdown-trigger" onclick="toggleNavDropdown(event)">
                        <div class="nav-item">
                            <div class="nav-icon">üë§</div>
                            <div class="nav-label">MOI</div>
                            <div class="nav-dropdown-arrow">‚ñº</div>
                        </div>
                    </div>
                    <div class="nav-dropdown-menu">
                        <a href="/profil.html" class="nav-dropdown-item">
                            <div class="dropdown-icon">üìã</div>
                            <div class="dropdown-label">Mon Profil</div>
                        </a>
                        <a href="/gouts.html" class="nav-dropdown-item">
                            <div class="dropdown-icon">‚ù§Ô∏è</div>
                            <div class="dropdown-label">Mes Go√ªts</div>
                        </a>
                        <a href="/capacites.html" class="nav-dropdown-item">
                            <div class="dropdown-icon">üß†</div>
                            <div class="dropdown-label">Mes Capacit√©s</div>
                        </a>
                        <a href="/personality-journey.html" class="nav-dropdown-item">
                            <div class="dropdown-icon">‚ú®</div>
                            <div class="dropdown-label">Test de Personnalit√©</div>
                        </a>
                    </div>
                </div>
                <a href="/quiz.html" class="nav-item-link">
                    <div class="nav-item active">
                        <div class="nav-icon">üéØ</div>
                        <div class="nav-label">Quiz & Tests</div>
                    </div>
                </a>
                <a href="/secteurs.html" class="nav-item-link">
                    <div class="nav-item">
                        <div class="nav-icon">üåê</div>
                        <div class="nav-label">D√©couverte de secteurs</div>
                    </div>
                </a>
                <a href="/events.html" class="nav-item-link">
                    <div class="nav-item">
                        <div class="nav-icon">üìÖ</div>
                        <div class="nav-label">Mes √âv√©nements</div>
                    </div>
                </a>
                <a href="/entreprises.html" class="nav-item-link">
                    <div class="nav-item">
                        <div class="nav-icon">üè¢</div>
                        <div class="nav-label">Approfondir le monde du travail</div>
                    </div>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <button class="header-icon-btn back-btn" title="Retour" onclick="window.location.href='/quiz.html'">
                        ‚Üê Retour aux quiz
                    </button>
                </div>

                <div class="header-center">
                    <div class="progress-blocks">
                        <a href="/personality-journey.html" class="progress-block active" style="text-decoration: none; color: inherit;">
                            <span class="block-number">1</span>
                            <span class="block-label">Te connaitre</span>
                        </a>
                        <a href="/quiz.html" class="progress-block active" style="text-decoration: none; color: inherit;">
                            <span class="block-number">2</span>
                            <span class="block-label">Te tester</span>
                        </a>
                        <a href="/secteurs.html" class="progress-block" style="text-decoration: none; color: inherit;">
                            <span class="block-number">3</span>
                            <span class="block-label">D√©couverte</span>
                        </a>
                        <a href="/events.html" class="progress-block" style="text-decoration: none; color: inherit;">
                            <span class="block-number">4</span>
                            <span class="block-label">Ev√©nements</span>
                        </a>
                        <a href="/entreprises.html" class="progress-block" style="text-decoration: none; color: inherit;">
                            <span class="block-number">5</span>
                            <span class="block-label">Approf.</span>
                        </a>
                    </div>
                </div>

                <div class="header-right">
                    <div class="header-icon-btn" id="settingsBtn">
                        ‚öôÔ∏è
                        <div class="settings-dropdown" id="settingsDropdown">
                            <div class="dropdown-item">Style du site</div>
                            <div class="dropdown-item">Support</div>
                            <div class="dropdown-item">Abonnement</div>
                            <div class="dropdown-item">Nos partenaires</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Quiz Header -->
                <div class="quiz-page-header">
                    <div class="quiz-badge">
                        <img id="quizBadgeImg" src="./Image_Quizz/Test_Ciblier_Pour_User.jpg" alt="Quiz Badge">
                    </div>
                    <div class="quiz-page-info">
                        <h1 id="quizTitle">Quiz Personnalit√©</h1>
                        <p id="quizDescription">Mieux te comprendre et d√©couvrir tes traits distinctifs</p>
                        <div class="quiz-meta">
                            <span class="quiz-difficulty" id="quizDifficulty">Facile</span>
                            <span class="quiz-time" id="quizTime">‚è±Ô∏è 10 min</span>
                            <span class="quiz-questions-count" id="questionsCount">10 questions</span>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="quiz-progress-container">
                    <div class="quiz-progress-text">
                        <span>Question <span id="currentQuestion">1</span> sur <span id="totalQuestions">10</span></span>
                        <span id="progressPercentage">10%</span>
                    </div>
                    <div class="quiz-progress-bar">
                        <div class="quiz-progress-fill" id="progressFill" style="width: 10%"></div>
                    </div>
                </div>

                <!-- Quiz Question Container -->
                <div class="quiz-question-container" id="quizContainer">
                    <!-- Question will be loaded here by JavaScript -->
                    <div class="quiz-question-box">
                        <h2 class="question-title" id="questionTitle">Chargement...</h2>
                        <div class="quiz-answers" id="answersContainer">
                            <!-- Answers will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="quiz-navigation">
                    <button class="btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>
                        ‚Üê Pr√©c√©dent
                    </button>
                    <button class="btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>
                        Suivant ‚Üí
                    </button>
                    <button class="btn-success" id="submitBtn" onclick="submitQuiz()" style="display: none;">
                        Terminer le quiz
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz Data Collections
        const quizzes = {
            'personnalite': {
                title: "Quiz Personnalit√©",
                description: "Mieux te comprendre et d√©couvrir tes traits distinctifs",
                difficulty: "Facile",
                time: "10 min",
                badge: "./Image_Quizz/Test_Ciblier_Pour_User.jpg",
                questions: [
                    {
                        id: 1,
                        question: "Dans quelle situation te sens-tu le plus √† l'aise ?",
                        answers: [
                            { id: "a", text: "Travailler en √©quipe sur un projet commun", correct: false },
                            { id: "b", text: "Travailler seul sur un projet personnel", correct: false },
                            { id: "c", text: "Diriger une √©quipe et coordonner les efforts", correct: false },
                            { id: "d", text: "Aider les autres √† r√©soudre leurs probl√®mes", correct: true }
                        ]
                    },
                    {
                        id: 2,
                        question: "Comment r√©agis-tu face √† un d√©fi impr√©vu ?",
                        answers: [
                            { id: "a", text: "Je cherche imm√©diatement des solutions cr√©atives", correct: true },
                            { id: "b", text: "Je prends du temps pour analyser la situation", correct: false },
                            { id: "c", text: "Je demande conseil √† d'autres personnes", correct: false },
                            { id: "d", text: "Je suis le protocole √©tabli", correct: false }
                        ]
                    },
                    {
                        id: 3,
                        question: "Quel type d'activit√© pr√©f√®res-tu dans ton temps libre ?",
                        answers: [
                            { id: "a", text: "Lire ou apprendre de nouvelles choses", correct: false },
                            { id: "b", text: "Cr√©er quelque chose (art, musique, bricolage)", correct: true },
                            { id: "c", text: "Faire du sport ou des activit√©s physiques", correct: false },
                            { id: "d", text: "Passer du temps avec des amis", correct: false }
                        ]
                    },
                    {
                        id: 4,
                        question: "Qu'est-ce qui te motive le plus dans un projet ?",
                        answers: [
                            { id: "a", text: "L'impact positif sur les autres", correct: false },
                            { id: "b", text: "La reconnaissance de mon travail", correct: false },
                            { id: "c", text: "Le d√©fi intellectuel", correct: true },
                            { id: "d", text: "La r√©mun√©ration financi√®re", correct: false }
                        ]
                    },
                    {
                        id: 5,
                        question: "Comment pr√©f√®res-tu communiquer des id√©es complexes ?",
                        answers: [
                            { id: "a", text: "Par des pr√©sentations visuelles et graphiques", correct: false },
                            { id: "b", text: "Par l'√©criture d√©taill√©e", correct: false },
                            { id: "c", text: "Par la discussion et le d√©bat", correct: true },
                            { id: "d", text: "Par des d√©monstrations pratiques", correct: false }
                        ]
                    },
                    {
                        id: 6,
                        question: "Dans un groupe de travail, quel r√¥le prends-tu naturellement ?",
                        answers: [
                            { id: "a", text: "Le leader qui organise et motive", correct: false },
                            { id: "b", text: "Le cr√©atif qui propose des id√©es nouvelles", correct: true },
                            { id: "c", text: "L'analyste qui √©value les options", correct: false },
                            { id: "d", text: "Le m√©diateur qui facilite la collaboration", correct: false }
                        ]
                    },
                    {
                        id: 7,
                        question: "Quelle phrase te d√©crit le mieux ?",
                        answers: [
                            { id: "a", text: "J'aime suivre des r√®gles et des proc√©dures √©tablies", correct: false },
                            { id: "b", text: "J'aime explorer de nouvelles fa√ßons de faire", correct: true },
                            { id: "c", text: "J'aime maintenir l'harmonie dans le groupe", correct: false },
                            { id: "d", text: "J'aime atteindre des objectifs mesurables", correct: false }
                        ]
                    },
                    {
                        id: 8,
                        question: "Comment g√®res-tu ton temps et tes priorit√©s ?",
                        answers: [
                            { id: "a", text: "Je planifie tout √† l'avance avec des listes d√©taill√©es", correct: false },
                            { id: "b", text: "Je m'adapte selon les situations qui se pr√©sentent", correct: true },
                            { id: "c", text: "Je me concentre sur ce qui est urgent", correct: false },
                            { id: "d", text: "Je d√©l√®gue autant que possible", correct: false }
                        ]
                    },
                    {
                        id: 9,
                        question: "Qu'est-ce qui te stresse le plus ?",
                        answers: [
                            { id: "a", text: "Le manque de structure et d'organisation", correct: false },
                            { id: "b", text: "Les conflits interpersonnels", correct: false },
                            { id: "c", text: "La routine et la r√©p√©tition", correct: true },
                            { id: "d", text: "L'incertitude sur l'avenir", correct: false }
                        ]
                    },
                    {
                        id: 10,
                        question: "Dans 10 ans, qu'est-ce qui serait le plus important pour toi ?",
                        answers: [
                            { id: "a", text: "Avoir un impact positif sur la soci√©t√©", correct: false },
                            { id: "b", text: "√ätre reconnu comme expert dans mon domaine", correct: false },
                            { id: "c", text: "Avoir la libert√© et l'ind√©pendance", correct: true },
                            { id: "d", text: "Avoir une vie √©quilibr√©e et stable", correct: false }
                        ]
                    }
                ]
            },
            'aviation': {
                title: "Quiz M√©tiers de l'Aviation",
                description: "D√©couvre les carri√®res dans l'aviation et teste tes connaissances",
                difficulty: "Moyen",
                time: "17 min",
                badge: "./Image_Quizz/avion.jpg",
                questions: [
                    {
                        id: 1,
                        question: "Quel est le r√¥le principal d'un pilote de ligne ?",
                        answers: [
                            { id: "a", text: "Commander l'avion et assurer la s√©curit√© des passagers", correct: true },
                            { id: "b", text: "V√©rifier les billets des passagers", correct: false },
                            { id: "c", text: "R√©parer l'avion en cas de panne", correct: false },
                            { id: "d", text: "Servir les repas aux passagers", correct: false }
                        ]
                    },
                    {
                        id: 2,
                        question: "Combien d'heures de vol minimum sont g√©n√©ralement requises pour obtenir une licence de pilote de ligne (ATPL) ?",
                        answers: [
                            { id: "a", text: "500 heures", correct: false },
                            { id: "b", text: "1500 heures", correct: true },
                            { id: "c", text: "3000 heures", correct: false },
                            { id: "d", text: "100 heures", correct: false }
                        ]
                    },
                    {
                        id: 3,
                        question: "Quel m√©tier consiste √† guider les avions au sol et dans l'espace a√©rien ?",
                        answers: [
                            { id: "a", text: "M√©canicien a√©ronautique", correct: false },
                            { id: "b", text: "H√¥tesse de l'air", correct: false },
                            { id: "c", text: "Contr√¥leur a√©rien", correct: true },
                            { id: "d", text: "Ing√©nieur avionique", correct: false }
                        ]
                    },
                    {
                        id: 4,
                        question: "Quelle formation est n√©cessaire pour devenir contr√¥leur a√©rien en France ?",
                        answers: [
                            { id: "a", text: "Un BTS A√©ronautique", correct: false },
                            { id: "b", text: "Formation √† l'ENAC (√âcole Nationale de l'Aviation Civile)", correct: true },
                            { id: "c", text: "Un master en physique", correct: false },
                            { id: "d", text: "Aucune formation sp√©cifique", correct: false }
                        ]
                    },
                    {
                        id: 5,
                        question: "Qu'est-ce qu'un m√©canicien a√©ronautique ?",
                        answers: [
                            { id: "a", text: "Une personne qui pilote les avions", correct: false },
                            { id: "b", text: "Une personne qui entretient et r√©pare les avions", correct: true },
                            { id: "c", text: "Une personne qui vend des billets d'avion", correct: false },
                            { id: "d", text: "Une personne qui nettoie les avions", correct: false }
                        ]
                    },
                    {
                        id: 6,
                        question: "Quel est le r√¥le de l'ing√©nieur avionique ?",
                        answers: [
                            { id: "a", text: "Concevoir et maintenir les syst√®mes √©lectroniques de l'avion", correct: true },
                            { id: "b", text: "Piloter l'avion", correct: false },
                            { id: "c", text: "Servir les passagers", correct: false },
                            { id: "d", text: "G√©rer les r√©servations", correct: false }
                        ]
                    },
                    {
                        id: 7,
                        question: "Quelle compagnie a√©rienne est la plus grande d'Europe ?",
                        answers: [
                            { id: "a", text: "British Airways", correct: false },
                            { id: "b", text: "Lufthansa", correct: false },
                            { id: "c", text: "Air France-KLM", correct: true },
                            { id: "d", text: "Ryanair", correct: false }
                        ]
                    },
                    {
                        id: 8,
                        question: "Quel appareil les pilotes utilisent-ils pour mesurer l'altitude ?",
                        answers: [
                            { id: "a", text: "Altim√®tre", correct: true },
                            { id: "b", text: "An√©mom√®tre", correct: false },
                            { id: "c", text: "Barom√®tre", correct: false },
                            { id: "d", text: "Tachym√®tre", correct: false }
                        ]
                    },
                    {
                        id: 9,
                        question: "Combien de temps dure g√©n√©ralement la formation pour devenir pilote de ligne ?",
                        answers: [
                            { id: "a", text: "6 mois", correct: false },
                            { id: "b", text: "1 an", correct: false },
                            { id: "c", text: "2 √† 3 ans", correct: true },
                            { id: "d", text: "5 ans", correct: false }
                        ]
                    },
                    {
                        id: 10,
                        question: "Quel est le salaire moyen d'un pilote de ligne en d√©but de carri√®re en France ?",
                        answers: [
                            { id: "a", text: "2 000 ‚Ç¨ par mois", correct: false },
                            { id: "b", text: "4 000 √† 6 000 ‚Ç¨ par mois", correct: true },
                            { id: "c", text: "10 000 ‚Ç¨ par mois", correct: false },
                            { id: "d", text: "15 000 ‚Ç¨ par mois", correct: false }
                        ]
                    }
                ]
            },
            'ingenieur-aeronautique': {
                title: "Quiz Ing√©nieur A√©ronautique",
                description: "Teste tes connaissances en ing√©nierie a√©ronautique",
                difficulty: "Difficile",
                time: "20 min",
                badge: "./Image_Quizz/ingenieur-en-aeronautique.jpg",
                questions: [
                    {
                        id: 1,
                        question: "Qu'est-ce que l'a√©rodynamique ?",
                        answers: [
                            { id: "a", text: "L'√©tude du mouvement de l'air autour des objets", correct: true },
                            { id: "b", text: "L'√©tude des moteurs d'avion", correct: false },
                            { id: "c", text: "L'√©tude des mat√©riaux", correct: false },
                            { id: "d", text: "L'√©tude de l'√©lectronique embarqu√©e", correct: false }
                        ]
                    },
                    {
                        id: 2,
                        question: "Quelle √©cole d'ing√©nieurs est la plus r√©put√©e en a√©ronautique en France ?",
                        answers: [
                            { id: "a", text: "√âcole Polytechnique", correct: false },
                            { id: "b", text: "ISAE-SUPAERO", correct: true },
                            { id: "c", text: "Centrale Paris", correct: false },
                            { id: "d", text: "Arts et M√©tiers", correct: false }
                        ]
                    },
                    {
                        id: 3,
                        question: "Quel type de propulsion est utilis√© par la plupart des avions de ligne modernes ?",
                        answers: [
                            { id: "a", text: "Moteur √† h√©lice", correct: false },
                            { id: "b", text: "Turbor√©acteur", correct: true },
                            { id: "c", text: "Moteur √©lectrique", correct: false },
                            { id: "d", text: "Fus√©e", correct: false }
                        ]
                    },
                    {
                        id: 4,
                        question: "Qu'est-ce que la portance ?",
                        answers: [
                            { id: "a", text: "La force qui permet √† l'avion de voler", correct: true },
                            { id: "b", text: "La r√©sistance de l'air", correct: false },
                            { id: "c", text: "Le poids de l'avion", correct: false },
                            { id: "d", text: "La pouss√©e du moteur", correct: false }
                        ]
                    },
                    {
                        id: 5,
                        question: "Quel mat√©riau est couramment utilis√© dans la construction des avions modernes pour sa l√©g√®ret√© et sa r√©sistance ?",
                        answers: [
                            { id: "a", text: "Acier", correct: false },
                            { id: "b", text: "Bois", correct: false },
                            { id: "c", text: "Aluminium et composites", correct: true },
                            { id: "d", text: "Plastique", correct: false }
                        ]
                    },
                    {
                        id: 6,
                        question: "Que signifie l'acronyme ENAC ?",
                        answers: [
                            { id: "a", text: "√âcole Nationale de l'Aviation Commerciale", correct: false },
                            { id: "b", text: "√âcole Nationale de l'Aviation Civile", correct: true },
                            { id: "c", text: "√âtablissement National A√©ronautique et Commercial", correct: false },
                            { id: "d", text: "√âcole Nationale d'A√©ronautique et Contr√¥le", correct: false }
                        ]
                    },
                    {
                        id: 7,
                        question: "Quel est le r√¥le principal d'un ing√©nieur en structures a√©ronautiques ?",
                        answers: [
                            { id: "a", text: "Concevoir les moteurs", correct: false },
                            { id: "b", text: "Concevoir et analyser la structure de l'avion pour qu'elle soit solide et l√©g√®re", correct: true },
                            { id: "c", text: "Programmer les syst√®mes de navigation", correct: false },
                            { id: "d", text: "G√©rer la production", correct: false }
                        ]
                    },
                    {
                        id: 8,
                        question: "Combien d'ann√©es d'√©tudes sont g√©n√©ralement n√©cessaires pour devenir ing√©nieur a√©ronautique ?",
                        answers: [
                            { id: "a", text: "2 ans", correct: false },
                            { id: "b", text: "3 ans", correct: false },
                            { id: "c", text: "5 ans", correct: true },
                            { id: "d", text: "7 ans", correct: false }
                        ]
                    },
                    {
                        id: 9,
                        question: "Qu'est-ce qu'un syst√®me 'fly-by-wire' ?",
                        answers: [
                            { id: "a", text: "Un syst√®me de commandes de vol √©lectriques", correct: true },
                            { id: "b", text: "Un type de moteur", correct: false },
                            { id: "c", text: "Un syst√®me de navigation", correct: false },
                            { id: "d", text: "Un syst√®me de communication", correct: false }
                        ]
                    },
                    {
                        id: 10,
                        question: "Quel avion commercial est consid√©r√© comme le plus gros au monde ?",
                        answers: [
                            { id: "a", text: "Boeing 747", correct: false },
                            { id: "b", text: "Airbus A380", correct: true },
                            { id: "c", text: "Boeing 777", correct: false },
                            { id: "d", text: "Airbus A350", correct: false }
                        ]
                    }
                ]
            }
        };

        // Get quiz type from URL or default
        const urlParams = new URLSearchParams(window.location.search);
        const quizType = urlParams.get('type') || 'personnalite';
        const quizData = quizzes[quizType] || quizzes['personnalite'];

        // State
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        // Initialize quiz
        function initQuiz() {
            // Set quiz header info
            document.getElementById('quizTitle').textContent = quizData.title;
            document.getElementById('quizDescription').textContent = quizData.description;
            document.getElementById('quizDifficulty').textContent = quizData.difficulty;
            document.getElementById('quizTime').textContent = '‚è±Ô∏è ' + quizData.time;
            document.getElementById('questionsCount').textContent = quizData.questions.length + ' questions';
            document.getElementById('quizBadgeImg').src = quizData.badge;
            document.getElementById('totalQuestions').textContent = quizData.questions.length;

            // Load first question
            loadQuestion();
        }

        // Load question
        function loadQuestion() {
            const question = quizData.questions[currentQuestionIndex];
            
            // Update progress
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            const progress = ((currentQuestionIndex + 1) / quizData.questions.length) * 100;
            document.getElementById('progressPercentage').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';

            // Update question
            document.getElementById('questionTitle').textContent = question.question;

            // Load answers
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            question.answers.forEach(answer => {
                const answerElement = document.createElement('label');
                answerElement.className = 'answer-option';
                answerElement.innerHTML = `
                    <input type="radio" name="answer" value="${answer.id}" onchange="selectAnswer('${answer.id}')">
                    <span class="answer-text">${answer.text}</span>
                `;
                answersContainer.appendChild(answerElement);
            });

            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex]) {
                const radio = document.querySelector(`input[value="${userAnswers[currentQuestionIndex]}"]`);
                if (radio) radio.checked = true;
                enableNextButton();
            }

            // Update navigation buttons
            updateNavigationButtons();
        }

        // Select answer
        function selectAnswer(answerId) {
            userAnswers[currentQuestionIndex] = answerId;
            enableNextButton();
            updateNavigationButtons(); // Update to enable submit button if on last question
        }

        // Enable next button
        function enableNextButton() {
            document.getElementById('nextBtn').disabled = false;
        }

        // Update navigation buttons
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');

            // Previous button
            prevBtn.disabled = currentQuestionIndex === 0;

            // Next/Submit button
            if (currentQuestionIndex === quizData.questions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
                submitBtn.disabled = !userAnswers[currentQuestionIndex];
            } else {
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
                nextBtn.disabled = !userAnswers[currentQuestionIndex];
            }
        }

        // Next question
        function nextQuestion() {
            if (currentQuestionIndex < quizData.questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        // Previous question
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        // Submit quiz
        function submitQuiz() {
            // Calculate score
            score = 0;
            userAnswers.forEach((answer, index) => {
                const question = quizData.questions[index];
                const correctAnswer = question.answers.find(a => a.correct);
                if (answer === correctAnswer.id) {
                    score++;
                }
            });

            // Store results and redirect to results page
            sessionStorage.setItem('quizScore', score);
            sessionStorage.setItem('quizTotal', quizData.questions.length);
            sessionStorage.setItem('quizType', quizType);
            window.location.href = '/quiz-result.html?score=' + score + '&total=' + quizData.questions.length + '&type=' + quizType;
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            initQuiz();
        }

        // Settings dropdown
        document.getElementById('settingsBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            const dropdown = document.getElementById('settingsDropdown');
            dropdown.classList.toggle('show');
        });

        document.addEventListener('click', function() {
            const dropdown = document.getElementById('settingsDropdown');
            dropdown.classList.remove('show');
        });

        // Navigation dropdown
        function toggleNavDropdown(event) {
            event.preventDefault();
            event.stopPropagation();
            const trigger = event.currentTarget;
            const dropdown = trigger.parentElement;
            dropdown.classList.toggle('open');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdowns = document.querySelectorAll('.nav-dropdown');
            dropdowns.forEach(dropdown => {
                if (!dropdown.contains(e.target)) {
                    dropdown.classList.remove('open');
                }
            });
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
</html>
